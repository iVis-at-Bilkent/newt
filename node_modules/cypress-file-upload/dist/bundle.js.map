{"version":3,"file":"bundle.js","sources":["../src/constants.js","../src/helpers/attachFileToElement.js","../lib/dom/dispatchEvent.js","../src/helpers/getFixtureInfo.js","../src/error.js","../lib/file/constants.js","../src/validators/validateFixture.js","../src/validators/validateFile.js","../lib/file/common.js","../lib/file/getFileBlobAsync.js","../lib/file/getFileEncoding.js","../src/index.js","../src/attachFile.js","../lib/object/merge.js","../src/validators/validateOptions.js","../src/helpers/getForceValue.js","../lib/browser/isManualEventHandling.js","../lib/dom/isElementVisible.js","../lib/dom/isShadowElement.js","../lib/file/resolveFile.js","../lib/file/getFileMimeType.js","../lib/file/getFileContent.js"],"sourcesContent":["export const DEFAULT_PROCESSING_OPTIONS = Object.freeze({\n  subjectType: 'input',\n  force: false,\n  allowEmpty: false,\n});\n\nexport const SUBJECT_TYPE = Object.freeze({\n  INPUT: 'input',\n  DRAG_N_DROP: 'drag-n-drop',\n});\n\nexport const EVENTS_BY_SUBJECT_TYPE = {\n  [SUBJECT_TYPE.INPUT]: ['change'],\n  [SUBJECT_TYPE.DRAG_N_DROP]: ['dragstart', 'drag', 'dragenter', 'drop', 'change', 'dragleave', 'dragend'],\n};\n","import { dispatchEvent } from '../../lib/dom';\nimport { SUBJECT_TYPE, EVENTS_BY_SUBJECT_TYPE } from '../constants';\n\nfunction dispatchEvents(element, events, dataTransfer) {\n  events.forEach(event => {\n    dispatchEvent(element, event, dataTransfer);\n  });\n}\n\nexport default function attachFileToElement(subject, { files, subjectType, force, window }) {\n  const dataTransfer = new window.DataTransfer();\n  files.forEach(f => dataTransfer.items.add(f));\n\n  if (subjectType === SUBJECT_TYPE.INPUT) {\n    const inputElement = subject[0];\n    inputElement.files = dataTransfer.files;\n\n    if (force) {\n      dispatchEvents(inputElement, EVENTS_BY_SUBJECT_TYPE[subjectType], dataTransfer);\n    }\n  } else if (subjectType === SUBJECT_TYPE.DRAG_N_DROP) {\n    const inputElements = subject[0].querySelectorAll('input[type=\"file\"]');\n\n    /**\n     * Try to find underlying file input element, as likely drag-n-drop component uses it internally\n     * Otherwise dispatch all events on subject element\n     */\n    if (inputElements.length === 1) {\n      const inputElement = inputElements[0];\n      inputElement.files = dataTransfer.files;\n\n      if (force) {\n        dispatchEvents(inputElement, EVENTS_BY_SUBJECT_TYPE[subjectType], dataTransfer);\n      }\n    } else {\n      const inputElement = subject[0];\n      inputElement.files = dataTransfer.files;\n\n      if (force) {\n        dispatchEvents(inputElement, EVENTS_BY_SUBJECT_TYPE[subjectType], dataTransfer);\n      }\n    }\n  }\n}\n","/**\n * @description dispatches custom event with dataTransfer object provided\n *\n * @param {HTMLElement} target\n * @param {string} event\n * @param {DataTransfer} dataTransfer\n */\nexport default function dispatchEvent(target, event, dataTransfer) {\n  const eventPayload = {\n    bubbles: true,\n    cancelable: true,\n    detail: dataTransfer,\n  };\n\n  try {\n    const e = new CustomEvent(event, eventPayload);\n    Object.assign(e, { dataTransfer });\n\n    target.dispatchEvent(e);\n  } catch (e) {\n    // make sure event triggering won't break if subject element is not visible or in DOM anymore\n  }\n}\n","import path from 'path';\n\nexport default function getFixtureInfo(fixtureInput) {\n  if (typeof fixtureInput === 'string') {\n    return {\n      filePath: fixtureInput,\n      encoding: '',\n      mimeType: '',\n      fileName: path.basename(fixtureInput),\n    };\n  }\n\n  return {\n    filePath: fixtureInput.filePath,\n    encoding: fixtureInput.encoding || '',\n    mimeType: fixtureInput.mimeType || '',\n    fileName: fixtureInput.fileName || path.basename(fixtureInput.filePath),\n    fileContent: fixtureInput.fileContent,\n    lastModified: fixtureInput.lastModified,\n  };\n}\n","export const ERR_TYPES = {\n  INVALID_SUBJECT_TYPE: {\n    message: '\"subjectType\" is not valid',\n    tip: 'Please look into docs to find supported \"subjectType\" values',\n  },\n  INVALID_FORCE: {\n    message: '\"force\" is not valid',\n    tip: 'Please look into docs to find supported \"force\" values',\n  },\n  INVALID_ALLOW_EMPTY: {\n    message: '\"allowEmpty\" is not valid',\n    tip: 'Please look into docs to find supported \"allowEmpty\" values',\n  },\n  INVALID_FILE_ENCODING: {\n    message: '\"file encoding\" is not valid',\n    tip: 'Please look into docs to find supported \"encoding\" values',\n  },\n  INVALID_FILE_PATH: {\n    message: '\"filePath\" is not valid',\n    tip: 'Please look into docs to find supported \"filePath\" values',\n  },\n  INVALID_MIME_TYPE: {\n    message: '\"mimeType\" is not valid',\n    tip: 'Please look into docs to find supported \"mimeType\" values',\n  },\n  INVALID_FILE: {\n    message: 'given fixture file is empty',\n    tip: 'Please make sure you provide correct file or explicitly set \"allowEmpty\" to true',\n  },\n  INVALID_LAST_MODIFIED: {\n    message: '\"lastModified\" is not valid\"',\n    tip: 'Please make sure you are passing a \"number\" `Date.now()` or `new Date().getTime()',\n  },\n  MISSING_FILE_NAME_OR_PATH: {\n    message: 'missing \"filePath\" or \"fileName\"',\n    tip: 'Please make sure you are passing either \"filePath\" or \"fileName\"',\n  },\n};\n\nexport class InternalError extends Error {\n  constructor(errorType, ...params) {\n    super(...params);\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, InternalError);\n    }\n\n    this.name = '[cypress-file-upload error]';\n    this.message = `${errorType.message}.\\n${errorType.tip}`;\n  }\n}\n","export const ENCODING = Object.freeze({\n  ASCII: 'ascii',\n  BASE64: 'base64',\n  BINARY: 'binary',\n  HEX: 'hex',\n  LATIN1: 'latin1',\n  UTF8: 'utf8',\n  UTF_8: 'utf-8',\n  UCS2: 'ucs2',\n  UCS_2: 'ucs-2',\n  UTF16LE: 'utf16le',\n  UTF_16LE: 'utf-16le',\n});\n\nexport const FILE_EXTENSION = Object.freeze({\n  JSON: 'json',\n  JS: 'js',\n  COFFEE: 'coffee',\n  HTML: 'html',\n  TXT: 'txt',\n  CSV: 'csv',\n  PNG: 'png',\n  JPG: 'jpg',\n  JPEG: 'jpeg',\n  GIF: 'gif',\n  TIF: 'tif',\n  TIFF: 'tiff',\n  ZIP: 'zip',\n  PDF: 'pdf',\n  VCF: 'vcf',\n  SVG: 'svg',\n  XLS: 'xls',\n  XLSX: 'xlsx',\n  DOC: 'doc',\n  DOCX: 'docx',\n  MP3: 'mp3',\n});\n","import { ERR_TYPES, InternalError } from '../error';\nimport { ENCODING } from '../../lib/file/constants';\n\nconst ALLOWED_ENCODINGS = Object.values(ENCODING);\n\nexport default function validateFixtures(fixture) {\n  const { filePath, fileName, encoding, mimeType, fileContent, lastModified } = fixture;\n\n  if (encoding && !ALLOWED_ENCODINGS.includes(encoding)) {\n    throw new InternalError(ERR_TYPES.INVALID_FILE_ENCODING);\n  }\n\n  if (typeof filePath !== 'string' && !fileContent) {\n    throw new InternalError(ERR_TYPES.INVALID_FILE_PATH);\n  }\n\n  if (typeof mimeType !== 'string') {\n    throw new InternalError(ERR_TYPES.INVALID_MIME_TYPE);\n  }\n\n  if (!filePath && !fileName) {\n    throw new InternalError(ERR_TYPES.MISSING_FILE_NAME_OR_PATH);\n  }\n\n  if (lastModified && typeof lastModified !== 'number') {\n    throw new InternalError(ERR_TYPES.INVALID_LAST_MODIFIED);\n  }\n\n  return true;\n}\n","import { ERR_TYPES, InternalError } from '../error';\n\nexport default (file, allowEmpty) => {\n  if (!allowEmpty) {\n    const { size } = file;\n\n    if (size === 0) {\n      throw new InternalError(ERR_TYPES.INVALID_FILE);\n    }\n  }\n\n  return true;\n};\n","export const wrapBlob = blob => {\n  // Cypress version 5 assigns a function with a compatibility warning\n  // to blob.then, but that makes the Blob actually thenable. We have\n  // to remove that to Promise.resolve not treat it as thenable.\n  if (blob instanceof Cypress.Promise) {\n    return blob;\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  delete blob.then;\n  return Cypress.Promise.resolve(blob);\n};\n\nexport default { wrapBlob };\n","import { extname } from 'path';\n\nimport { ENCODING, FILE_EXTENSION } from './constants';\n\nimport { wrapBlob } from './common';\n\nconst ENCODING_TO_BLOB_GETTER = {\n  [ENCODING.ASCII]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.BASE64]: (fileContent, mimeType) => wrapBlob(Cypress.Blob.base64StringToBlob(fileContent, mimeType)),\n  [ENCODING.BINARY]: (fileContent, mimeType) => wrapBlob(Cypress.Blob.binaryStringToBlob(fileContent, mimeType)),\n  [ENCODING.HEX]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.LATIN1]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.UTF8]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.UTF_8]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.UCS2]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.UCS_2]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.UTF16LE]: fileContent => Cypress.Promise.resolve(fileContent),\n  [ENCODING.UTF_16LE]: fileContent => Cypress.Promise.resolve(fileContent),\n};\n\nexport default function getFileBlobAsync({ fileName, fileContent, mimeType, encoding, window, lastModified }) {\n  const getBlob = ENCODING_TO_BLOB_GETTER[encoding];\n\n  return getBlob(fileContent, mimeType).then(blob => {\n    let blobContent = blob;\n\n    // https://github.com/abramenal/cypress-file-upload/issues/175\n    if (extname(fileName).slice(1) === FILE_EXTENSION.JSON) {\n      blobContent = JSON.stringify(fileContent, null, 2);\n    }\n\n    // we must use the file constructor from the subject window so this check `file instanceof File`, can pass\n    const file = new window.File([blobContent], fileName, { type: mimeType, lastModified });\n    return file;\n  });\n}\n","import { extname } from 'path';\n\nimport { ENCODING, FILE_EXTENSION } from './constants';\n\n/*\n * Copied from https://github.com/cypress-io/cypress/blob/develop/packages/server/lib/fixture.coffee#L104\n */\nconst EXTENSION_TO_ENCODING = {\n  [FILE_EXTENSION.JSON]: ENCODING.UTF8,\n  [FILE_EXTENSION.JS]: ENCODING.UTF8,\n  [FILE_EXTENSION.COFFEE]: ENCODING.UTF8,\n  [FILE_EXTENSION.HTML]: ENCODING.UTF8,\n  [FILE_EXTENSION.TXT]: ENCODING.UTF8,\n  [FILE_EXTENSION.CSV]: ENCODING.UTF8,\n  [FILE_EXTENSION.PNG]: ENCODING.BASE64,\n  [FILE_EXTENSION.JPG]: ENCODING.BASE64,\n  [FILE_EXTENSION.JPEG]: ENCODING.BASE64,\n  [FILE_EXTENSION.GIF]: ENCODING.BASE64,\n  [FILE_EXTENSION.TIF]: ENCODING.BASE64,\n  [FILE_EXTENSION.TIFF]: ENCODING.BASE64,\n  [FILE_EXTENSION.ZIP]: ENCODING.BASE64,\n\n  /*\n   * Other extensions that are not supported by cy.fixture by default:\n   */\n  [FILE_EXTENSION.PDF]: ENCODING.UTF8,\n  [FILE_EXTENSION.VCF]: ENCODING.UTF8,\n  [FILE_EXTENSION.SVG]: ENCODING.UTF8,\n  [FILE_EXTENSION.XLS]: ENCODING.BINARY,\n  [FILE_EXTENSION.XLSX]: ENCODING.BINARY,\n  [FILE_EXTENSION.DOC]: ENCODING.BINARY,\n  [FILE_EXTENSION.DOCX]: ENCODING.BINARY,\n  [FILE_EXTENSION.MP3]: ENCODING.BINARY,\n};\n\nconst DEFAULT_ENCODING = ENCODING.UTF8;\n\nexport default function getFileEncoding(filePath) {\n  const extension = extname(filePath).slice(1);\n  const encoding = EXTENSION_TO_ENCODING[extension];\n\n  return encoding || DEFAULT_ENCODING;\n}\n","import attachFile from './attachFile';\n\nconst initialize = () => {\n  Cypress.Commands.add('attachFile', { prevSubject: true }, attachFile);\n};\n\ninitialize();\n","import { DEFAULT_PROCESSING_OPTIONS } from './constants';\n\nimport { attachFileToElement, getFixtureInfo, getForceValue } from './helpers';\nimport { validateFixture, validateFile, validateOptions } from './validators';\nimport { resolveFile } from '../lib/file';\nimport { merge } from '../lib/object';\n\nexport default function attachFile(subject, fixtureOrFixtureArray, processingOptions) {\n  const { subjectType, force, allowEmpty } = merge(processingOptions, DEFAULT_PROCESSING_OPTIONS);\n  validateOptions({\n    subjectType,\n    force,\n    allowEmpty,\n  });\n\n  const fixturesArray = Array.isArray(fixtureOrFixtureArray) ? fixtureOrFixtureArray : [fixtureOrFixtureArray];\n  const fixtures = fixturesArray.map(getFixtureInfo).filter(validateFixture);\n\n  Cypress.cy.window({ log: false }).then(window => {\n    const forceValue = force || getForceValue(subject);\n\n    Cypress.Promise.all(fixtures.map(f => resolveFile(f, window))) // resolve files\n      .then(files => files.filter(f => validateFile(f, allowEmpty))) // error if any of the file contents are invalid\n      .then(files => {\n        attachFileToElement(subject, {\n          files,\n          subjectType,\n          force: forceValue,\n          window,\n        });\n        return files;\n      })\n      .then(files =>\n        Cypress.log({\n          name: 'attachFile',\n          displayName: 'FILE',\n          message: files.reduce((acc, f) => `${acc.length > 0 ? `${acc}, ` : acc}${f.name}`, ''),\n        }),\n      );\n  });\n\n  return Cypress.cy.wrap(subject, { log: false });\n}\n","export default function merge(target = {}, source = {}) {\n  return {\n    ...source,\n    ...target,\n  };\n}\n","import { SUBJECT_TYPE } from '../constants';\nimport { ERR_TYPES, InternalError } from '../error';\n\nexport default ({ subjectType, force, allowEmpty }) => {\n  if (Object.values(SUBJECT_TYPE).indexOf(subjectType) === -1) {\n    throw new InternalError(ERR_TYPES.INVALID_SUBJECT_TYPE);\n  }\n\n  if (typeof force !== 'boolean') {\n    throw new InternalError(ERR_TYPES.INVALID_FORCE);\n  }\n\n  if (typeof allowEmpty !== 'boolean') {\n    throw new InternalError(ERR_TYPES.INVALID_ALLOW_EMPTY);\n  }\n\n  return true;\n};\n","import { isManualEventHandling } from '../../lib/browser';\nimport { isElementVisible, isShadowElement } from '../../lib/dom';\n\nexport default function getForceValue(subject) {\n  return isManualEventHandling() || !isElementVisible(subject) || isShadowElement(subject);\n}\n","const BROWSER_CHROME = 'chrome';\n\nexport default function isManualEventHandling() {\n  const { name, majorVersion } = Cypress.browser;\n\n  if (name === BROWSER_CHROME && majorVersion < 73) {\n    /**\n     * Chrome <73 triggers 'change' event automatically\n     * https://github.com/abramenal/cypress-file-upload/issues/34\n     */\n    return false;\n  }\n\n  return true;\n}\n","/**\n * @description determines if element is visible in DOM\n *\n * @param {Cypress.Subject} element\n * @returns {Boolean}\n */\nexport default function isElementVisible(element) {\n  if (!element) {\n    throw new Error('Element cannot be empty');\n  }\n\n  /* running isVisible command on detached element throws an error */\n  return Cypress.dom.isAttached(element) && Cypress.dom.isVisible(element);\n}\n","/**\n * @description determines if element is visible in DOM\n *\n * @param {Cypress.Subject} element\n * @returns {Boolean}\n */\nexport default function isShadowElement(element) {\n  if (!element) {\n    throw new Error('Element cannot be empty');\n  }\n\n  return Cypress.dom.isDetached(element);\n}\n","import getFileContent from './getFileContent';\nimport getFileMimeType from './getFileMimeType';\nimport getFileEncoding from './getFileEncoding';\nimport getFileBlobAsync from './getFileBlobAsync';\n\nexport default function resolveFile(fixture, window) {\n  const { filePath, encoding, mimeType, fileName, lastModified } = fixture;\n\n  const fileMimeType = mimeType || getFileMimeType(filePath);\n  const fileEncoding = encoding || getFileEncoding(filePath);\n  const fileLastModified = lastModified || Date.now();\n\n  return new Cypress.Promise(resolve =>\n    getFileContent({\n      filePath,\n      fileContent: fixture.fileContent,\n      fileEncoding,\n    })\n      .then(fileContent =>\n        getFileBlobAsync({\n          fileContent,\n          fileName,\n          mimeType: fileMimeType,\n          encoding: fileEncoding,\n          lastModified: fileLastModified,\n          window,\n        }),\n      )\n      .then(resolve),\n  );\n}\n","import { extname } from 'path';\nimport { getType } from 'mime';\n\nexport default function getFileMimeType(filePath) {\n  const extension = extname(filePath).slice(1);\n  const mimeType = getType(extension);\n\n  return mimeType;\n}\n","import { wrapBlob } from './common';\n\nexport default function getFileContent({ filePath, fileContent, fileEncoding }) {\n  // allows users to provide file content.\n  if (fileContent) {\n    return wrapBlob(fileContent);\n  }\n\n  return Cypress.cy.fixture(filePath, fileEncoding);\n}\n"],"names":["DEFAULT_PROCESSING_OPTIONS","Object","freeze","subjectType","force","allowEmpty","SUBJECT_TYPE","INPUT","DRAG_N_DROP","EVENTS_BY_SUBJECT_TYPE","dispatchEvents","element","events","dataTransfer","forEach","event","target","eventPayload","bubbles","cancelable","detail","e","CustomEvent","assign","dispatchEvent","getFixtureInfo","fixtureInput","filePath","encoding","mimeType","fileName","path","basename","fileContent","lastModified","ERR_TYPES","message","tip","InternalError","errorType","_this","Error","captureStackTrace","name","ENCODING","ASCII","BASE64","BINARY","HEX","LATIN1","UTF8","UTF_8","UCS2","UCS_2","UTF16LE","UTF_16LE","FILE_EXTENSION","JSON","JS","COFFEE","HTML","TXT","CSV","PNG","JPG","JPEG","GIF","TIF","TIFF","ZIP","PDF","VCF","SVG","XLS","XLSX","DOC","DOCX","MP3","ALLOWED_ENCODINGS","values","validateFixtures","fixture","includes","wrapBlob","blob","Cypress","Promise","then","resolve","ENCODING_TO_BLOB_GETTER","Blob","base64StringToBlob","binaryStringToBlob","EXTENSION_TO_ENCODING","DEFAULT_ENCODING","Commands","add","prevSubject","subject","fixtureOrFixtureArray","processingOptions","source","indexOf","validateOptions","fixtures","Array","isArray","map","filter","validateFixture","cy","window","log","forceValue","browser","majorVersion","dom","isAttached","isVisible","isElementVisible","isDetached","isShadowElement","getForceValue","all","f","fileMimeType","extension","extname","slice","getType","getFileMimeType","fileEncoding","getFileEncoding","fileLastModified","Date","now","getFileContent","getBlob","blobContent","stringify","File","type","getFileBlobAsync","resolveFile","files","file","size","validateFile","DataTransfer","items","inputElement","inputElements","querySelectorAll","length","attachFileToElement","displayName","reduce","acc","wrap"],"mappings":"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"}